<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Test Supabase</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <h2>Login Test</h2>
  <button id="loginBtn">Login as Admin</button>
  <br /><br />

  <h2>Upload Test</h2>
  <input type="file" id="fileInput" />
  <button id="uploadBtn">Upload</button>

  <script>
    const supabaseUrl = 'https://tovaitbkfvviyqyzguze.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvdmFpdGJrZnZ2aXlxeXpndXplIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0MTI5MjIsImV4cCI6MjA3NDk4ODkyMn0.dUByWl_YW4uJi_iWGkUgQGcNCr3FSNda5rhC-rd5Sy8';

    const supabase = supabase.createClient(supabaseUrl, supabaseKey);

    // Admin Login
    document.getElementById('loginBtn').addEventListener('click', async () => {
      const email = prompt('Enter admin email:');
      const password = prompt('Enter password:');
      const { data, error } = await supabase.auth.signInWithPassword({ email, password });

      if (error) {
        console.error('Login error:', error.message);
        alert('Login failed: ' + error.message);
      } else {
        console.log('Login success:', data);
        alert('Login successful');
      }
    });

    // Upload File
    document.getElementById('uploadBtn').addEventListener('click', async () => {
      const file = document.getElementById('fileInput').files[0];
      if (!file) {
        alert('Please select a file first.');
        return;
      }

      const timestamp = Date.now();
      const filePath = `public/${timestamp}_${file.name}`;

      const { data, error } = await supabase.storage
        .from('artworks')
        .upload(filePath, file, { upsert: true });

      if (error) {
        console.error('Upload error:', error.message);
        alert('Upload failed: ' + error.message);
      } else {
        const { data: publicData } = supabase.storage.from('artworks').getPublicUrl(filePath);
        alert('Upload successful!\nURL: ' + publicData.publicUrl);
      }
    });
  </script>
</body>
</html>
